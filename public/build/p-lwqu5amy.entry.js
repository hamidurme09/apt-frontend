import{r as s,j as t,c as i,h as a}from"./p-f5b6b644.js";import"./p-1ba263c2.js";import"./p-19ec51eb.js";import"./p-811a61b7.js";import"./p-74149bb1.js";import{b as e}from"./p-ca0e51b7.js";import{a as o}from"./p-08706a58.js";import{L as n}from"./p-9d50b311.js";import{d as h,e as c}from"./p-661df142.js";import{A as r}from"./p-d2e35ecb.js";const l=class{constructor(a){s(this,a),this.guests=0,this.checkinDate=null,this.checkoutDate=null,this.submitAttempt=0,this.apartmentId=null,this.errors=[],this.showSeasonalRates=t(this,"showSeasonalRates",7),this.showCheckInInput=t(this,"showCheckInInput",7),this.showCheckOutInput=t(this,"showCheckOutInput",7),this.showGuestsInput=t(this,"showGuestsInput",7),this.showAskQuestionInput=t(this,"showAskQuestionInput",7),this.showBookingDetails=t(this,"showBookingDetails",7),this.store=i(this,"store")}componentWillLoad(){this.store.mapStateToProps(this,s=>({guests:e.getGuests(s),apartmentId:e.getApartmentId(s),checkinDate:e.getCheckinDate(s),checkoutDate:e.getCheckoutDate(s)})),this.store.mapDispatchToProps(this,{bookingReset:h,bookingSetDetails:c}),this.apartmentId!==this.item.id&&this.bookingReset()}checkErrors(){const s=[];this.checkinDate&&this.checkoutDate&&this.guests||s.push("Please select check in/out dates and a number of guests"),this.checkinDate&&this.checkoutDate&&(this.checkinDate>this.checkoutDate?s.push("Check out date must be after check in date"):(this.checkoutDate.getTime()-this.checkinDate.getTime())/864e5<30&&s.push("Check out date must be at least 30 days after check in")),this.errors=s}async submit(){if(this.submitAttempt++,this.checkErrors(),!this.errors.length){await n.showLoading();try{const s=await r.getBookingDetails(this.item.id,this.checkinDate,this.checkoutDate,this.guests);this.bookingSetDetails(s),await n.hideLoading(),this.showBookingDetails.emit(s)}catch(s){this.errors=[s.message],await n.hideLoading()}}}render(){return a("div",{class:"page-listing-checkin-component"},a("div",{class:"check-in-out"},a("button",{"aria-label":"Check in date",class:"button-reset checkin-button",onClick:s=>this.showCheckInInput.emit({target:s.currentTarget})},a("lazy-image",{src:"/assets/images/icons/calendar.svg"})," ",this.checkinDate?o(this.checkinDate,"m/d/Y"):"Check In"),a("img",{src:"/assets/images/icons/arrow.svg",class:"arrow"}),a("button",{"aria-label":"Check out date",class:"button-reset checkin-button checkout",onClick:s=>this.showCheckOutInput.emit({target:s.currentTarget})},a("lazy-image",{src:"/assets/images/icons/calendar.svg"})," ",this.checkoutDate?o(this.checkoutDate,"m/d/Y"):"Check Out")),a("button",{"aria-label":"Number of guests",class:"button-reset guests",onClick:s=>this.showGuestsInput.emit({target:s.currentTarget})},a("div",{class:"guest-value"},"Guests",this.guests?`: ${this.guests}`:null)," ",a("ion-icon",{mode:"md",name:"md-arrow-dropdown",class:"dropdown"})),this.submitAttempt?a("div",{class:"errors"},this.errors.map(s=>a("div",null,s))):null,a("button",{class:"button-dark booking-details",onClick:()=>this.submit()},"Booking Details"),a("button",{class:"button-reset ask-question",onClick:s=>this.showAskQuestionInput.emit({target:s.currentTarget})},"Ask a question"),a("div",{class:"seasonal-rating"},a("div",{class:"min-stay"},"30 Days minimum"),a("button",{"aria-label":"Seasonal Rating",class:"button-reset rating",onClick:s=>this.showSeasonalRates.emit({target:s.currentTarget})},"Seasonal Rating ",a("ion-icon",{name:"ios-arrow-forward",mode:"ios"}))))}static get style(){return".page-listing-checkin-component .check-in-out{display:-ms-flexbox;display:flex;padding:0 26px;height:56px;width:100%;border:1px solid #000}.page-listing-checkin-component .check-in-out .arrow{width:32px;-webkit-transform:rotate(180deg);transform:rotate(180deg)}.page-listing-checkin-component .check-in-out .checkin-button{-ms-flex-positive:1;flex-grow:1;font-size:22px;text-align:left;width:176px}.page-listing-checkin-component .check-in-out .checkin-button.checkout{text-align:right}.page-listing-checkin-component .check-in-out .checkin-button lazy-image{width:16px;height:16px;-o-object-fit:contain;object-fit:contain}.page-listing-checkin-component .guests{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;width:100%;text-align:left;height:56px;border:1px solid #000;padding:0 15px;margin-top:19px}\@media (min-width:1200px){.page-listing-checkin-component .guests{margin-top:13px}}.page-listing-checkin-component .guests .guest-value{-ms-flex-positive:1;flex-grow:1;font-size:22px}.page-listing-checkin-component .guests .dropdown{font-size:26px}.page-listing-checkin-component .ask-question,.page-listing-checkin-component .booking-details{width:100%;height:56px;text-transform:uppercase;font-size:14px;margin-top:19px;font-weight:700}\@media (min-width:1200px){.page-listing-checkin-component .ask-question,.page-listing-checkin-component .booking-details{margin-top:16px}}.page-listing-checkin-component .ask-question{border:1px solid #000}.page-listing-checkin-component .seasonal-rating{display:-ms-flexbox;display:flex;margin-top:23px}\@media (min-width:1200px){.page-listing-checkin-component .seasonal-rating{margin-top:16px}}.page-listing-checkin-component .seasonal-rating .min-stay{-ms-flex-positive:1;flex-grow:1}.page-listing-checkin-component .seasonal-rating .rating{display:-ms-flexbox;display:flex;color:#057365;-ms-flex-align:center;align-items:center}.page-listing-checkin-component .seasonal-rating .rating ion-icon{font-size:13px;margin-left:.5rem}.page-listing-checkin-component .errors>div{color:red;padding-top:.5rem}"}};export{l as page_listing_checkin};