import{r as t,h as e}from"./p-f5b6b644.js";import"./p-19ec51eb.js";import"./p-811a61b7.js";import{s}from"./p-c041151f.js";import{T as l}from"./p-2c007f74.js";import{A as n}from"./p-5908b5da.js";const i=class{constructor(e){t(this,e),this.owners=[],this.ownerStats=null,this.loaded=!1}async componentDidLoad(){try{const t=await n.getAptOwners();this.loaded=!0,this.owners=t}catch(t){this.loaded=!0,l.error(t.message)}}async onSubmit(t){t.preventDefault();const e=s(t.target,{hash:!0});try{await n.updateOwnerGlobal(e),l.success("Owner listings have been updated")}catch(t){l.error(t.message)}}async getOwnerStats(t){if(t.target.value)try{const e=await n.getOwnerStats(t.target.value);this.ownerStats=e}catch(t){l.error(t.message)}else this.ownerStats=null}render(){return e("div",{class:"owner-global-form-component"},this.loaded&&this.owners.length?e("form",{class:"owner-global-form",onSubmit:t=>this.onSubmit(t)},e("fieldset",null,e("h3",null,"Global Change To Owner"),e("p",null,"Note: only fields that are given values will be updated. ",e("br",null),'eg. if you leave "Background Check" blank then the current background check values will be left alone'),e("div",{class:"input"},e("label",{htmlFor:"owners-input"},"Owner"),e("select",{name:"owner_name",id:"owners-input",class:"apt212-input block",onChange:t=>this.getOwnerStats(t)},e("option",{value:""}),this.owners.map(t=>e("option",{value:t},t)))),null!==this.ownerStats?e("div",{class:"owner-stats"},e("h4",null,"Owner Listings"),e("div",{class:"listing-stat"},"All: ",this.ownerStats.total),e("div",{class:"listing-stat"},"Active: ",this.ownerStats.active),e("div",{class:"listing-stat"},"Inactive: ",this.ownerStats.inactive)):null),e("fieldset",null,e("h3",null,"7. Pricing"),e("input-pricing",{name:"rates",disableKeys:["monthly_rate"],onRateChanged:t=>this.monthRatesInput.updateDefault(t.detail.key,t.detail.value)})),e("fieldset",null,e("h3",null,"8. Month Specific Rates"),e("input-month-rates",{name:"rates",rates:[],disableKeys:["monthly_rate","night_rate"],ref:t=>this.monthRatesInput=t})),e("fieldset",null,e("h3",null,"9. Utilities/Move out fee"),e("input-utilities",null)),e("fieldset",null,e("h3",null,"10. Payment Timeline"),e("input-payment-timeline",null)),e("input",{type:"submit",class:"button-dark",value:"Save"})):null,this.loaded?null:e("div",{class:"text-center"},e("ion-spinner",{name:"lines"})),this.loaded&&!this.owners.length?e("div",{class:"text-center"},"No owners were found to update"):null)}static get style(){return".owner-global-form-component .listing-stat{display:inline-block;padding-right:16px}"}};export{i as owner_global_form};