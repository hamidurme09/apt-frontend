import{r as t,c as i,h as s,d as e}from"./p-f5b6b644.js";import{E as o}from"./p-19ec51eb.js";import"./p-74149bb1.js";import{S as l}from"./p-980b9778.js";import{g as a,f as r}from"./p-08706a58.js";import{t as n}from"./p-7295e390.js";import{G as h}from"./p-1ba2ed3c.js";const d=class{constructor(s){t(this,s),this.mapId=`map-instance-${a(8)}`,this.map=null,this.mapRendered=!1,this.neighborhoods=[],this.store=i(this,"store")}componentDidLoad(){this.store.mapStateToProps(this,t=>({neighborhoods:n.getNeighborhoods(t)}))}componentDidRender(){this.mapRendered||this.initializeMap()}initializeMap(){this.map&&(this.map.remove(),this.map=null),l.loadScript("mapbox","https://api.mapbox.com/mapbox-gl-js/v1.4.1/mapbox-gl.js").then(()=>{mapboxgl.accessToken=o.getInstance().get("MAPBOX_PUBLIC_TOKEN"),this.map=new mapboxgl.Map({container:this.mapId,style:"mapbox://styles/mapbox/streets-v11",center:[this.item.lng,this.item.lat],zoom:14,minZoom:10,maxZoom:17,scrollZoom:!1}),this.map.dragPan.disable(),this.map.touchZoomRotate.disable(),this.map.addControl(new mapboxgl.NavigationControl),this.map.on("load",()=>{this.mapRendered=!0,this.neighborhoods.filter(t=>this.item.neighborhood_ids.includes(t.id)).forEach(t=>{this.map.addLayer({id:`neighborhood-outline-${t.id}`,type:"line",source:{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:t.perimeter_coordinates}}},layout:{},paint:{"line-color":"#000","line-opacity":.7,"line-width":2}}),this.map.addLayer({id:`neighborhood-fill-${t.id}`,type:"fill",source:{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:t.perimeter_coordinates}}},layout:{},paint:{"fill-color":"#000","fill-opacity":.2}})}),new mapboxgl.Popup({closeOnClick:!1,closeButton:!1,anchor:"center",maxWidth:"none",className:"listing-marker"}).setLngLat([this.item.lng,this.item.lat]).setHTML(`<div>${r(this.item.rate)}</div>`).addTo(this.map)})})}render(){return s("div",{class:"listing-map-component"},s("div",{id:this.mapId}))}get el(){return e(this)}static get style(){return".listing-map-component{width:100%;height:416px}.listing-map-component>div{width:100%;height:100%}.listing-map-component .listing-marker{font-size:26px;font-weight:700}.listing-map-component .mapboxgl-popup-content{-webkit-box-shadow:0 1px 3px 1px rgba(0,0,0,.24);box-shadow:0 1px 3px 1px rgba(0,0,0,.24);border-radius:6px;padding:.5rem .75rem;font-size:12px}"}},c=class{constructor(i){t(this,i),this.sliderClass="glide",this.images=[]}componentWillLoad(){if(this.sliderClass+="-"+a(8),this.images=[...this.item.images],this.images.length)for(;this.images.length<3;)this.images.push(this.images[0])}componentDidLoad(){setTimeout(()=>{this.initializeSlider()},100)}initializeSlider(){document.querySelectorAll("."+this.sliderClass+" .glide__slide").length&&(this.glide=new h("."+this.sliderClass,{type:"slider",perView:3,gap:8,focusAt:0,startAt:0,bound:!0,rewind:!1,breakpoints:{575:{perView:1,startAt:0,focusAt:0}}}),this.glide.on("build.after",()=>{let t=document.querySelector("."+this.sliderClass+" .glide__track"),i=document.querySelectorAll("."+this.sliderClass+" .glide__slide");if(!t&&!i)return;let s=t.offsetHeight;i.forEach(t=>{s=Math.max(s,t.offsetHeight)}),s!=t.offsetHeight&&(t.style.height=s+"px")}),this.glide.on("move.after",()=>{this.afterSlideChange()}),this.glide.on("resize",()=>{this.hideShowArrows()}),this.hideShowArrows(),this.glide.mount())}componentDidUnload(){this.glide&&this.glide.destroy()}showImg(t){const i=document.createElement("ion-modal");return i.component="page-listing-image-modal",i.componentProps={selected:t,images:this.images},i.classList.add("listing-gallery"),document.body.appendChild(i),i.present()}hideShowArrows(){const t=this.el.querySelector(".page-listing-image-slider-component"),i=this.el.querySelector(".glide__arrows");t.clientWidth<=575?this.images.length>1&&(i.style.display="block"):i.style.display=this.images.length>3?"block":"none"}afterSlideChange(){const t=this.el.querySelector(".glide__arrow--left"),i=this.el.querySelector(".glide__arrow--right"),s=this.el.querySelector(".page-listing-image-slider-component");let e=this.item.images.length-3;s&&s.clientWidth<=575&&(e=this.item.images.length-1),this.glide.index?(t&&(t.style.display="block"),i&&(i.style.display=this.glide.index>=e?"none":"block")):(t&&(t.style.display="none"),i&&(i.style.display="block"))}render(){return this.item.images.length?s("div",{class:"page-listing-image-slider-component"},s("div",{class:"glide "+this.sliderClass},s("div",{class:"glide__track","data-glide-el":"track"},s("ul",{class:"glide__slides"},this.images.map(t=>s("li",{class:"glide__slide"},s("maintain-ratio",{width:478,height:504},s("lazy-image",{src:t.medium,class:"slider__img",onClick:()=>this.showImg(t),alt:t.title})))))),s("div",{class:"glide__arrows","data-glide-el":"controls"},s("button",{"aria-label":"Previous slide",class:"glide__arrow glide__arrow--left","data-glide-dir":"<"},s("img",{src:"/assets/images/icons/listing_gallery_slider_arrow.svg"})),s("button",{"aria-label":"Next slide",class:"glide__arrow glide__arrow--right","data-glide-dir":">"},s("img",{src:"/assets/images/icons/listing_gallery_slider_arrow.svg"}))))):null}get el(){return e(this)}static get style(){return".glide{position:relative;width:100%;-webkit-box-sizing:border-box;box-sizing:border-box}.glide *{-webkit-box-sizing:inherit;box-sizing:inherit}.glide__slides,.glide__track{overflow:hidden}.glide__slides{position:relative;width:100%;list-style:none;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;-ms-touch-action:pan-Y;touch-action:pan-Y;padding:0;white-space:nowrap;display:-ms-flexbox;display:flex;-ms-flex-wrap:nowrap;flex-wrap:nowrap;will-change:transform}.glide__slide,.glide__slides--dragging{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.glide__slide{width:100%;height:100%;-ms-flex-negative:0;flex-shrink:0;white-space:normal;-webkit-touch-callout:none;-webkit-tap-highlight-color:transparent}.glide__slide a{-webkit-user-select:none;user-select:none;-webkit-user-drag:none;-moz-user-select:none;-ms-user-select:none}.glide__arrows,.glide__bullets{-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.glide--rtl{direction:rtl}.glide__arrow{position:absolute;display:block;top:50%;z-index:2;color:#fff;text-transform:uppercase;padding:9px 12px;background-color:transparent;border:2px solid hsla(0,0%,100%,.5);border-radius:4px;-webkit-box-shadow:0 .25em .5em 0 rgba(0,0,0,.1);box-shadow:0 .25em .5em 0 rgba(0,0,0,.1);text-shadow:0 .25em .5em rgba(0,0,0,.1);opacity:1;cursor:pointer;-webkit-transition:opacity .15s ease,border .3s ease-in-out;transition:opacity .15s ease,border .3s ease-in-out;-webkit-transform:translateY(-50%);transform:translateY(-50%);line-height:1}.glide__arrow:focus{outline:none}.glide__arrow:hover{border-color:#fff}.glide__arrow--left{left:2em}.glide__arrow--right{right:2em}.glide__arrow--disabled{opacity:.33}.glide__bullets{position:absolute;z-index:2;bottom:2em;left:50%;display:-ms-inline-flexbox;display:inline-flex;list-style:none;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.glide__bullet{background-color:hsla(0,0%,100%,.5);width:9px;height:9px;padding:0;border-radius:50%;border:2px solid transparent;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;cursor:pointer;line-height:0;-webkit-box-shadow:0 .25em .5em 0 rgba(0,0,0,.1);box-shadow:0 .25em .5em 0 rgba(0,0,0,.1);margin:0 .25em}.glide__bullet:focus{outline:none}.glide__bullet:focus,.glide__bullet:hover{border:2px solid #fff;background-color:hsla(0,0%,100%,.5)}.glide__bullet--active{background-color:#fff}.glide--swipeable{cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.glide--dragging{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}.page-listing-image-slider-component .glide .glide__track{-webkit-transform:translateZ(0);transform:translateZ(0);-webkit-perspective:1000;perspective:1000}.page-listing-image-slider-component .glide .glide__slides{margin:0}.page-listing-image-slider-component .glide .glide__arrow{display:block;position:absolute;background-color:transparent;border:0;border-radius:0;padding:0;font-size:32px;-webkit-box-shadow:none;box-shadow:none;padding:15px;top:calc(50% - 30px)}.page-listing-image-slider-component .glide .glide__arrow img{width:20px;height:60px}.page-listing-image-slider-component .glide .glide__arrow--right{right:20px}.page-listing-image-slider-component .glide .glide__arrow--right img{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.page-listing-image-slider-component .glide .glide__arrow--left{display:none;left:20px}.page-listing-image-slider-component .slider__img{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}ion-modal.listing-gallery{--width:100%;--height:100%}ion-modal.listing-gallery .modal-wrapper{--background:transparent;--box-shadow:none}"}},g=class{constructor(i){t(this,i),this.width="100%",this.height="100%",this.videoTitle="Youtube Video",this.played=!1}componentWillRender(){this.videoId=this.YouTubeGetID(this.src)}YouTubeGetID(t){return void 0!==(t=t.split(/(vi\/|v%3D|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?t[2].split(/[^0-9a-z_\-]/i)[0]:t[0]}getContainerStyle(){const t={width:"100%",height:"100%"};return this.width&&(t.width=`${this.width}`),this.height&&(t.height=`${this.height}`),t}render(){const t={allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:!0,width:"100%",height:"100%",src:`https://www.youtube.com/embed/${this.videoId}?autoplay=1`,frameborder:"0",title:this.videoTitle};return this.videoId?s("div",{class:"youtube-video-component",style:this.getContainerStyle()},this.played?s("iframe",Object.assign({},t)):s("a",{"aria-label":this.videoTitle,class:"placeholder",onClick:()=>{this.played=!0}},s("lazy-image",{src:`https://i3.ytimg.com/vi/${this.videoId}/maxresdefault.jpg`,class:"placeholder",alt:"Youtube Video"}),s("div",{class:"icon-wrapper"},s("div",{class:"icon-container"},s("svg",{class:"play",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},s("path",{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"})))))):null}get el(){return e(this)}static get style(){return".youtube-video-component{background-color:var(--youtube-video-bg-color,#000)}.youtube-video-component .placeholder{width:100%;height:100%;cursor:var(--youtube-video-pointer,pointer);position:relative}.youtube-video-component a.placeholder{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center}.youtube-video-component .icon-wrapper{position:relative;width:var(--youtube-video-icon-bg-size,35%);padding-bottom:var(--youtube-video-icon-bg-size,35%);background-color:var(--youtube-video-icon-wrapper-background,transparent);border-radius:50%;z-index:1}.youtube-video-component .icon-container{position:absolute;width:100%;height:100%;top:0;left:0;display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.youtube-video-component lazy-image.placeholder{position:absolute;-o-object-fit:var(--youtube-video-object-fit,contain);object-fit:var(--youtube-video-object-fit,contain)}.youtube-video-component .play{position:absolute;height:auto;width:var(--youtube-video-icon-size,20%);fill:var(--youtube-video-icon-color,#fff)}"}};export{d as listing_map,c as page_listing_image_slider,g as youtube_video};