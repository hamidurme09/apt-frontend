import{r as s,c as t,h as i,H as r,d as a}from"./p-f5b6b644.js";import"./p-74149bb1.js";import{f as e}from"./p-08706a58.js";import{s as o}from"./p-3fe3eb5a.js";import{g as h}from"./p-15e55934.js";import{t as n}from"./p-7295e390.js";const m=class{constructor(i){s(this,i),this.text="",this.hoverText="",this.mapMarkers=[],this._ids=[],this.bedroomTypes=[],this.store=t(this,"store")}componentWillLoad(){this.store.mapStateToProps(this,s=>({bedroomTypes:n.getBedroomTypes(s),mapMarkers:o.getMapMarkers(s)}))}componentDidLoad(){const s=this.mapMarkers.find(s=>s.id===parseInt(this.markerId));if(s)if(1===s.apartments_count){const t=n.getBedroomTypeById(s.apartments[0].bedroom_type_id,this.bedroomTypes);this.text=e(s.apartments[0].rate),this.hoverText=`${e(s.apartments[0].rate)} | ${h(t,"short")} | ${s.apartments[0].bathrooms} BA`}else this.text=`${s.apartments_count} listings`,this.hoverText=s.min_rate===s.max_rate?e(s.max_rate):`${e(s.min_rate)} - ${e(s.max_rate)}`}componentDidRender(){const s=this.el.querySelector(".hover-card"),t=this.el.querySelector(".marker-container"),i=Math.round((s.clientWidth-t.clientWidth)/2);s.style.marginLeft=`-${i}px`}select(){this.el.closest("search-map").showDetails(this.markerId)}render(){return i(r,{class:"map-listing-marker"},i("div",{class:"marker-container"},i("div",{class:"hover-card"},this.hoverText),i("a",{"aria-label":"View listing details",onClick:()=>this.select()},this.text)))}get el(){return a(this)}static get style(){return":host{cursor:pointer}.map-listing-marker a{cursor:pointer;font-size:14px;font-weight:700;font-family:proxima-nova,sans-serif;white-space:nowrap}.map-listing-marker .hover-card{position:absolute;margin-top:-40px;white-space:nowrap;background:rgba(0,0,0,.8);padding:.25rem 1rem;border-radius:6px;color:#fff;visibility:hidden}.map-listing-marker:hover .hover-card{visibility:visible}"}};export{m as map_listing_marker};