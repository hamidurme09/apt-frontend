import{r as s,c as i,h as t,H as e,d as o}from"./p-f5b6b644.js";import"./p-1ba263c2.js";import"./p-19ec51eb.js";import"./p-811a61b7.js";import"./p-5628850f.js";import"./p-74149bb1.js";import{R as a}from"./p-9d127c97.js";import{x as n,n as l,a as c,f as r}from"./p-08706a58.js";import{M as h}from"./p-d40f2c8b.js";import{g as m}from"./p-15e55934.js";import{t as d}from"./p-7295e390.js";import{w as p}from"./p-a98ad3e7.js";import{a as g,r as u}from"./p-2e71a8a9.js";import{A as v}from"./p-7be04cb4.js";const b=class{constructor(t){s(this,t),this.wishlist=[],this.nearbyApts=[],this.store=i(this,"store")}componentWillLoad(){this.store.mapStateToProps(this,s=>{const i=d.getNeighborhoods(s);return{bedroomTypes:d.getBedroomTypes(s),buildingTypes:d.getBuildingTypes(s),itemNeighborhoods:i.filter(s=>this.item.neighborhood_ids.includes(s.id)),neighborhoods:i,wishlist:p.getWishlist(s)}}),this.store.mapDispatchToProps(this,{addToWishlist:g,removeFromWishlist:u})}async componentDidLoad(){try{const s=await v.getNamedSearch("nearbyApts",{id:this.item.id});this.nearbyApts=s}catch(s){}}getFeatures(){const s=d.getBedroomTypeById(this.item.bedroom_type_id,this.bedroomTypes),i=d.getBuildingTypeById(this.item.building_type_id,this.buildingTypes);let e=[{name:t("span",null,t("img",{src:"/assets/images/icons/bedroom.svg",class:"feature-icon",alt:"bedroom"})," Bedrooms"),value:m(s,"short")},{name:t("span",null,t("img",{src:"/assets/images/icons/bathroom.svg",class:"feature-icon",alt:"bathroom"})," Bathrooms"),value:this.item.bathrooms},{name:"Building Type",value:t("div",{class:"flex-vertical-center building-type"},t("star-rating",{stars:5,rating:i.rating,size:16,readonly:!0})," ",i.name)}];return this.item.floor&&e.push({name:"Floor",value:this.item.floor}),this.item.size&&e.push({name:"Apartment Square Footage",value:`${this.item.size} sqft`}),e.push({name:"Neighborhood",value:this.itemNeighborhoods.reduce((s,i)=>(s.length&&(s+="/"),s+=i.name),"")}),this.item.cross_streets&&e.push({name:"Cross Streets",value:this.item.cross_streets}),this.item.subways.length&&e.push({name:"Nearby Subways",value:this.item.subways.map(s=>t("lazy-image",{src:s.icon,class:"subway-icon"}))}),e.push({name:"Web ID",value:`#${this.item.id}`}),e}toggleWishlist(){this.wishlist.includes(this.item.id)?this.removeFromWishlist([this.item.id]):this.addToWishlist([this.item.id])}showSeasonalRates(){const s=Object.assign(document.createElement("ion-modal"),{component:"apt212-modal-booking-frame",cssClass:"seasonal-rates-modal",componentProps:{component:"seasonal-rates",componentProps:{item:this.item}}});return document.body.appendChild(s),s.present()}shareApartment(){const s=Object.assign(document.createElement("ion-modal"),{component:"apt212-modal-booking-frame",cssClass:"share-listing-modal",componentProps:{component:"share-listing",componentProps:{items:[this.item]}}});return document.body.appendChild(s),s.present()}showBookingDateInput(s){const i=Object.assign(document.createElement("apt212-popover"),{component:"input-booking-date",componentProps:{type:s,inPopover:!0,item:this.item},animateSrc:"none",styleOverride:{top:"142px",left:"20px",width:"438px",zIndex:"1",border:"1px solid black",transform:"none"}});this.el.querySelector(".checkin-form").appendChild(i)}showGuestInput(){const s=Object.assign(document.createElement("apt212-popover"),{component:"input-booking-guests",componentProps:{item:this.item},animateSrc:"none",styleOverride:{top:"200px",left:"20px",width:"438px",zIndex:"1",border:"1px solid black",transform:"none"}});this.el.querySelector(".checkin-form").appendChild(s)}showBookingDetails(){const s=Object.assign(document.createElement("ion-modal"),{component:"apt212-modal-booking-frame",cssClass:"booking-details-modal",componentProps:{component:"booking-details",componentProps:{item:this.item}}});return document.body.appendChild(s),s.present()}showAskQuestion(){return h.contactUs(this.item)}render(){const s=this.neighborhoods.filter(s=>!(!this.item.neighborhood_ids.includes(s.id)||s.marketing_neighborhood)||!s.marketing_neighborhood&&!!this.itemNeighborhoods.find(i=>i.marketing_neighborhood===s.slug));return t(e,{class:"page-listing-body-component"},t("section",{class:"section no-padding"},t("page-listing-image-slider",{item:this.item})),t("section",{class:"section listing-main"},t("div",{class:{"listing-right":!0,"has-slider":!!this.item.images.length}},t("div",{class:"stickyblock"},t("div",{class:"listing-price"},t("div",null,t("span",{class:"rate"},r(this.item.rate))," per month")),t("div",{class:"checkin-form"},t("div",{class:"available-date"},t("span",{class:"date"},c(this.item.available_date,"m.d.y"))," next available date"),t("page-listing-checkin",{item:this.item,onShowCheckInInput:()=>this.showBookingDateInput("checkin"),onShowCheckOutInput:()=>this.showBookingDateInput("checkout"),onShowGuestsInput:()=>this.showGuestInput(),onShowSeasonalRates:()=>this.showSeasonalRates(),onShowBookingDetails:()=>this.showBookingDetails(),onShowAskQuestionInput:()=>this.showAskQuestion()})),t("div",{class:"wishlist-share"},t("button",{"aria-label":"Add to wishlist",class:"button-reset has-icon",onClick:()=>this.toggleWishlist()},t("img",{src:"/assets/images/icons/heart_icon.svg",class:"wishlist-icon"})," ",this.wishlist.includes(this.item.id)?"Remove from wishlist":"Add to wishlist"),t("button",{"aria-label":"Share listing",class:"button-reset has-icon",onClick:()=>this.shareApartment()},t("img",{src:"/assets/images/icons/share.svg",class:"share-icon"})," Share")))),t("div",{class:"listing-left"},t("div",{class:"listing-description"},t("h1",null,this.item.title),t("p",{innerHTML:n(l(this.item.description))})),this.item.floor_plans.length?t("div",{class:"listing-section"},t("div",{class:"title"},"Floor Plan"),this.item.floor_plans.map(s=>t("lazy-image",{src:s.large,class:"full-img"}))):null,this.item.video_url?t("div",{class:"listing-section"},t("div",{class:"title"},"Video"),t("maintain-ratio",{width:583,height:328},t("youtube-video",{src:this.item.video_url,class:"listing-video"}))):null,t("div",{class:"listing-section"},t("div",{class:"title"},"Features"),this.getFeatures().map((s,i)=>{let e={feature:!0};return e[`feature-${i}`]=!0,t("div",{class:e},t("div",{class:"feature-name"},s.name),t("div",{class:"feature-value"},s.value))})),this.item.amenities.length?t("div",{class:"listing-section"},t("div",{class:"title"},"Amenities"),this.item.amenities.map(s=>t("div",{class:"amenity flex-vertical-center"},t("div",{class:"icon"},t("lazy-image",{src:s.icon})),s.name))):null,t("div",{class:"listing-section"},t("div",{class:"title"},"Location"),t("listing-map",{item:this.item})),s.map((s,i)=>{if(0===i)return t("div",{class:"listing-section"},t("div",{class:"title"},s.name),t("div",{class:"neighborhood"},t("lazy-image",{src:s.image,class:"neighborhood-image"}),t("div",{class:"description",innerHTML:s.description},t("a",{href:`/nyc-neighborhood/${s.slug}/apartments`,class:"button-dark"},"Explore"))))}),t("div",{class:"listing-section"},t("div",{class:"title"},"The booking process"),t("div",{class:"booking-process flex-vertical-center"},t("div",{class:"icon"},t("img",{src:"/assets/images/icons/add.svg"})),"Submit a payment of 1 month's rent to secure the apartment"),t("div",{class:"booking-process flex-vertical-center"},t("div",{class:"icon"},t("img",{src:"/assets/images/icons/application.svg"})),"Fill out an online application"),t("div",{class:"booking-process flex-vertical-center"},t("div",{class:"icon"},t("img",{src:"/assets/images/icons/approved.svg"})),"We will get you approved within 48 hours"),t("div",{class:"booking-process flex-vertical-center"},t("div",{class:"icon"},t("img",{src:"/assets/images/icons/sign_lease.svg"})),"Sign a lease online"),t("div",{class:"booking-process flex-vertical-center"},t("div",{class:"icon"},t("lazy-image",{src:"/assets/images/icons/shield.svg"})),"Pick up a key and check in")))),this.nearbyApts.length?t("section",{class:"section"},t("div",{class:"listing-section full-width"},t("h2",{class:"title"},"Nearby Apartments"),t("div",{class:"nearby-list"},this.nearbyApts.map(s=>t("listing-card",{item:s,mode:"desktop"})))),t("div",null,t("ion-router-link",{href:a.getRoute("search"),class:"show-all"},"Show All >"))):null)}get el(){return o(this)}static get style(){return".page-listing-body-component .listing-main{display:-ms-flexbox;display:flex;-ms-flex-direction:row-reverse;flex-direction:row-reverse}.page-listing-body-component .listing-main .listing-right{display:none;min-width:480px;width:480px;margin-right:45px;z-index:1}\@media (min-width:1200px){.page-listing-body-component .listing-main .listing-right{display:block;margin-left:10px}}.page-listing-body-component .listing-main .listing-right.has-slider{margin-top:-72px}.page-listing-body-component .listing-main .listing-left{-ms-flex-positive:1;flex-grow:1}\@media (min-width:1200px){.page-listing-body-component .listing-main .listing-description{padding-right:40px}}.page-listing-body-component .listing-main .listing-price{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;font-size:16px;font-weight:900;height:72px;background-color:rgba(0,0,0,.74);color:#fff;padding-left:19px}.page-listing-body-component .listing-main .listing-price .rate{display:inline-block;font-size:32px;font-weight:900;padding-right:5px}.page-listing-body-component .stickyblock{position:-webkit-sticky;position:sticky;top:0}.page-listing-body-component .checkin-form{position:relative;border:1px solid #000;border-top:0;padding:20px}.page-listing-body-component .checkin-form .available-date{font-size:16px;font-weight:900;padding-bottom:1rem}.page-listing-body-component .checkin-form .available-date .date{font-size:32px;font-weight:900;padding-right:5px}.page-listing-body-component .wishlist-share{margin-top:20px;display:-ms-flexbox;display:flex}.page-listing-body-component .wishlist-share button{display:-ms-flexbox;display:flex;width:100%;-ms-flex-pack:center;justify-content:center;font-size:20px}.page-listing-body-component .wishlist-share button img{margin-right:1rem;width:18px}.page-listing-body-component .wishlist-share button img.share-icon{width:15px}.page-listing-body-component .listing-description h1{font-size:24px;font-weight:700;font-family:proxima-nova,sans-serif}\@media (min-width:1200px){.page-listing-body-component .listing-description h1{margin-top:48px}}.page-listing-body-component .listing-description p{font-size:16px;color:#060606}.page-listing-body-component .listing-section{width:100%;margin-top:50px}\@media (min-width:1200px){.page-listing-body-component .listing-section{max-width:591px}}.page-listing-body-component .listing-section.full-width{max-width:100%}.page-listing-body-component .listing-section .title{height:38px;display:-ms-flexbox;display:flex;-ms-flex-line-pack:center;align-content:center;font-size:24px;font-weight:700;border-bottom:2px solid #000;text-transform:uppercase;margin-bottom:25px}.page-listing-body-component .listing-section .full-img{width:100%}.page-listing-body-component .listing-section .listing-video{--youtube-video-object-fit:cover}.page-listing-body-component .feature{min-height:72px;-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;border-bottom:1px solid #929292}.page-listing-body-component .feature.feature-0{margin-top:-25px}.page-listing-body-component .feature .feature-name{-ms-flex-positive:1;flex-grow:1;white-space:nowrap}.page-listing-body-component .feature .feature-name .feature-icon{width:18px;margin-right:.5rem;vertical-align:middle}.page-listing-body-component .feature .feature-value{text-align:right}\@media (min-width:1200px){.page-listing-body-component .feature .feature-value{padding-right:1.5rem}}.page-listing-body-component .feature .feature-value star-rating{margin-top:2px;margin-right:10px}.page-listing-body-component .feature .feature-value .building-type{-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:end;justify-content:flex-end}.page-listing-body-component .feature .subway-icon{width:25px;margin-left:4px}.page-listing-body-component .amenity,.page-listing-body-component .booking-process{font-size:17px;line-height:1.88;margin-bottom:30px;display:inline-block;width:100%}\@media (min-width:1200px){.page-listing-body-component .amenity,.page-listing-body-component .booking-process{width:33%}}.page-listing-body-component .amenity .icon,.page-listing-body-component .booking-process .icon{display:inline-block;vertical-align:middle;width:37px}.page-listing-body-component .amenity .icon lazy-image,.page-listing-body-component .booking-process .icon lazy-image{display:block;width:20px;height:23px;-o-object-fit:contain;object-fit:contain}.page-listing-body-component .booking-process{display:-ms-flexbox;display:flex;width:100%}.page-listing-body-component .booking-process .icon{width:50px}.page-listing-body-component .booking-process .icon lazy-image{width:25px;height:25px}.page-listing-body-component .neighborhood{display:block}\@media (min-width:1200px){.page-listing-body-component .neighborhood{display:-ms-flexbox;display:flex}}.page-listing-body-component .neighborhood .description{margin-top:1.5rem}\@media (min-width:1200px){.page-listing-body-component .neighborhood .description{-ms-flex-positive:1;flex-grow:1;margin-top:0;padding-left:50px}}.page-listing-body-component .neighborhood .description a.button-dark{display:block;width:204px;text-align:center;font-size:14px;text-transform:uppercase;margin-top:16px;text-decoration:none}.page-listing-body-component .neighborhood-image{width:100%}\@media (min-width:1200px){.page-listing-body-component .neighborhood-image{width:271px;min-width:271px}}.page-listing-body-component .nearby-list{display:grid;grid-gap:40px;grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}.page-listing-body-component .show-all{display:inline-block;padding-top:.5rem;font-weight:900}.seasonal-rates-modal .modal-wrapper{--width:734px;--height:787px;--max-height:100%;--max-width:100%}.share-listing-modal .modal-wrapper{--width:482px;--height:491px;--max-height:100%;--max-width:100%}.booking-details-modal .modal-wrapper{--width:784px;--height:815px;--max-width:100%;--max-height:100%}"}};export{b as page_listing_body};