import{r as t,h as e,d as i,j as s}from"./p-f5b6b644.js";import{c as n,u as l}from"./p-74149bb1.js";import{r as a,t as u,a as h}from"./p-08706a58.js";import{i as c}from"./p-0850846a.js";import{T as r}from"./p-2c007f74.js";const o=class{constructor(e){t(this,e),this.rates=[],this.disableKeys=[]}async updateDefault(t,e){switch(t){case"monthly_rate":case"security_deposit_percent":case"service_fee_host":case"service_fee_client":const i=this.el.querySelectorAll(`input.rate-input.${t}`);i&&i.forEach(t=>{t.value=e;const i=document.createEvent("HTMLEvents");i.initEvent("change",!1,!0),t.dispatchEvent(i)})}}changeMonthRate(t,e,i){if(t.target.value.length)if(c(t.target.value)){if("monthly_rate"===i){const i=new Date((new Date).setDate(1)),s=(parseFloat(t.target.value)/function(t){a(1,arguments);var e=u(t),i=e.getFullYear(),s=e.getMonth(),n=new Date(0);return n.setFullYear(i,s+1,0),n.setHours(0,0,0,0),n.getDate()}(i.setMonth(e))).toFixed(2),n=this.el.querySelector(`input[name="${this.name}[${e}][night_rate]"]`);n&&(n.value=s)}}else r.error("Invalid number entered")}render(){let t=[{name:"<span>Monthly Rate</span>",key:"monthly_rate",disabled:!1},{name:"<span>Daily Rate</span>",key:"night_rate",disabled:!0},{name:"<span>Security %</span>",key:"security_deposit_percent",disabled:!1},{name:"<span>Service Fee <br /> Host (%)</span>",key:"service_fee_host",disabled:!1},{name:"<span>Service Fee <br /> Client (%)</span>",key:"service_fee_client",disabled:!1}];return t=t.filter(t=>!this.disableKeys.find(e=>t.key===e)),[e("div",{class:"monthly-rates-wrapper"},e("table",{class:"monthly-rates"},e("thead",null,e("tr",null,e("td",null),[0,1,2,3,4,5].map(t=>{const i=new Date((new Date).setDate(1)).setMonth(t);return e("td",null,h(i,"MMM"))}))),e("tbody",null,t.map(t=>e("tr",null,e("td",{class:"label",innerHTML:t.name}),[0,1,2,3,4,5].map(i=>{const s={"apt212-input":!0,block:!0,"rate-input":!0};return s[t.key]=!0,e("td",null,e("input",{type:"text",class:s,name:`${this.name}[${i}][${t.key}]`,value:this.rates.length?this.rates.find(t=>t.month==i)[t.key]:"",disabled:t.disabled,onChange:e=>this.changeMonthRate(e,i,t.key)}))})))))),e("div",{class:"monthly-rates-wrapper"},e("table",{class:"monthly-rates"},e("thead",null,e("tr",null,e("td",null),[6,7,8,9,10,11].map(t=>{const i=new Date((new Date).setDate(1)).setMonth(t);return e("td",null,h(i,"MMM"))}))),e("tbody",null,t.map(t=>e("tr",null,e("td",{class:"label",innerHTML:t.name}),[6,7,8,9,10,11].map(i=>{const s={"apt212-input":!0,block:!0,"rate-input":!0};return s[t.key]=!0,e("td",null,e("input",{type:"text",class:s,name:`${this.name}[${i}][${t.key}]`,value:this.rates.length?this.rates.find(t=>t.month==i)[t.key]:"",disabled:t.disabled,onChange:e=>this.changeMonthRate(e,i,t.key)}))}))))))]}get el(){return i(this)}static get style(){return""}};var p=n((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),s={value:"data-value",disabled:"data-disabled",class:"class",type:"type"},n=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._node=e instanceof HTMLElement?e:document.createElement(e),this._config={i18n:s},this._setAttributes(i),i.textContent&&this._setTextContent(i.textContent),this}return i(t,[{key:"get",value:function(){return this._node}},{key:"append",value:function(t){return this._node.appendChild(t),this}},{key:"addClass",value:function(t){return this._node.classList.add(t),this}},{key:"removeClass",value:function(t){return this._node.classList.remove(t),this}},{key:"toggleClass",value:function(t){return this._node.classList.toggle(t),this}},{key:"addEventListener",value:function(t,e){return this._node.addEventListener(t,e),this}},{key:"removeEventListener",value:function(t,e){return this._node.removeEventListener(t,e),this}},{key:"setText",value:function(t){return this._setTextContent(t),this}},{key:"getHeight",value:function(){return window.getComputedStyle(this._node).height}},{key:"setTop",value:function(t){return this._node.style.top=t+"px",this}},{key:"focus",value:function(){return this._node.focus(),this}},{key:"_setTextContent",value:function(t){this._node.textContent=t}},{key:"_setAttributes",value:function(t){for(var e in t)s[e]&&t[e]&&this._setAttribute(s[e],t[e])}},{key:"_setAttribute",value:function(t,e){this._node.setAttribute(t,e)}}]),t}();e.default=n}));l(p);const d=l(n((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var i,s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),l=(i=p)&&i.__esModule?i:{default:i};function a(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var u={select:"select-pure__select",dropdownShown:"select-pure__select--opened",multiselect:"select-pure__select--multiple",label:"select-pure__label",placeholder:"select-pure__placeholder",dropdown:"select-pure__options",option:"select-pure__option",autocompleteInput:"select-pure__autocomplete",selectedLabel:"select-pure__selected-label",selectedOption:"select-pure__option--selected",placeholderHidden:"select-pure__placeholder--hidden",optionHidden:"select-pure__option--hidden"},h=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config=s({},i,{classNames:s({},u,i.classNames)}),this._state={opened:!1},this._icons=[],this._boundHandleClick=this._handleClick.bind(this),this._boundUnselectOption=this._unselectOption.bind(this),this._boundSortOptions=this._sortOptions.bind(this),this._body=new l.default(document.body),this._create(e),this._config.value&&this._setValue()}return n(t,[{key:"value",value:function(){return this._config.value}},{key:"_create",value:function(t){var e="string"==typeof t?document.querySelector(t):t;this._parent=new l.default(e),this._select=new l.default("div",{class:this._config.classNames.select}),this._label=new l.default("span",{class:this._config.classNames.label}),this._optionsWrapper=new l.default("div",{class:this._config.classNames.dropdown}),this._config.multiple&&this._select.addClass(this._config.classNames.multiselect),this._options=this._generateOptions(),this._select.addEventListener("click",this._boundHandleClick),this._select.append(this._label.get()),this._select.append(this._optionsWrapper.get()),this._parent.append(this._select.get()),this._placeholder=new l.default("span",{class:this._config.classNames.placeholder,textContent:this._config.placeholder}),this._select.append(this._placeholder.get())}},{key:"_generateOptions",value:function(){var t=this;return this._config.autocomplete&&(this._autocomplete=new l.default("input",{class:this._config.classNames.autocompleteInput,type:"text"}),this._autocomplete.addEventListener("input",this._boundSortOptions),this._optionsWrapper.append(this._autocomplete.get())),this._config.options.map((function(e){var i=new l.default("div",{class:t._config.classNames.option,value:e.value,textContent:e.label,disabled:e.disabled});return t._optionsWrapper.append(i.get()),i}))}},{key:"_handleClick",value:function(t){if(t.stopPropagation(),t.target.className!==this._config.classNames.autocompleteInput){if(this._state.opened){var e=this._options.find((function(e){return e.get()===t.target}));return e&&this._setValue(e.get().getAttribute("data-value"),!0),this._select.removeClass(this._config.classNames.dropdownShown),this._body.removeEventListener("click",this._boundHandleClick),this._select.addEventListener("click",this._boundHandleClick),void(this._state.opened=!1)}t.target.className!==this._config.icon&&(this._select.addClass(this._config.classNames.dropdownShown),this._body.addEventListener("click",this._boundHandleClick),this._select.removeEventListener("click",this._boundHandleClick),this._state.opened=!0,this._autocomplete&&this._autocomplete.focus())}}},{key:"_setValue",value:function(t,e,i){var s=this;if(t&&!i&&(this._config.value=this._config.multiple?[].concat(a(this._config.value||[]),[t]):t),t&&i&&(this._config.value=t),this._options.forEach((function(t){t.removeClass(s._config.classNames.selectedOption)})),this._placeholder.removeClass(this._config.classNames.placeholderHidden),this._config.multiple){var n=this._config.value.map((function(t){var e=s._config.options.find((function(e){return e.value===t}));return s._options.find((function(t){return t.get().getAttribute("data-value")===e.value.toString()})).addClass(s._config.classNames.selectedOption),e}));return n.length&&this._placeholder.addClass(this._config.classNames.placeholderHidden),void this._selectOptions(n,e)}var l=this._config.value?this._config.options.find((function(t){return t.value.toString()===s._config.value})):this._config.options[0];this._options.find((function(t){return t.get().getAttribute("data-value")===l.value.toString()})).addClass(this._config.classNames.selectedOption),this._placeholder.addClass(this._config.classNames.placeholderHidden),this._selectOption(l,e)}},{key:"_selectOption",value:function(t,e){this._selectedOption=t,this._label.setText(t.label),this._config.onChange&&e&&this._config.onChange(t.value)}},{key:"_selectOptions",value:function(t,e){var i=this;this._label.setText(""),this._icons=t.map((function(t){var e=new l.default("span",{class:i._config.classNames.selectedLabel,textContent:t.label}),s=new l.default(i._config.inlineIcon?i._config.inlineIcon.cloneNode(!0):"i",{class:i._config.icon,value:t.value});return s.addEventListener("click",i._boundUnselectOption),e.append(s.get()),i._label.append(e.get()),s.get()})),e&&this._optionsWrapper.setTop(Number(this._select.getHeight().split("px")[0])+5),this._config.onChange&&e&&this._config.onChange(this._config.value)}},{key:"_unselectOption",value:function(t){var e=[].concat(a(this._config.value)),i=e.indexOf(t.target.getAttribute("data-value"));-1!==i&&e.splice(i,1),this._setValue(e,!0,!0)}},{key:"_sortOptions",value:function(t){var e=this;this._options.forEach((function(i){i.get().textContent.toLowerCase().startsWith(t.target.value.toLowerCase())?i.removeClass(e._config.classNames.optionHidden):i.addClass(e._config.classNames.optionHidden)}))}}]),t}();e.default=h}))),v=class{constructor(e){t(this,e),this.value=[],this.internalValue=[],this.internalOptions=[],this.onValueChange=s(this,"onValueChange",7)}componentWillLoad(){this.internalValue=this.value,this.internalOptions=this.options}componentDidLoad(){this.options.length&&this.initializeInput()}async updateOptions(t){this.internalOptions=[...t];const e=t.map(t=>t.value);this.internalValue=[...this.internalValue].filter(t=>e.includes(t)),this.initializeInput()}initializeInput(){this.instance&&(this.renderNode.innerHTML=""),this.instance=new d(this.renderNode,{options:this.internalOptions,multiple:!0,value:this.internalValue,onChange:()=>this.valueChanged(),inlineIcon:this.closeIcon})}valueChanged(){this.internalValue=[...this.instance.value()],this.onValueChange.emit(this.internalValue)}render(){return e("div",{class:"input-multiselect-component"},e("span",{class:"example",ref:t=>this.renderNode=t}),e("div",{class:"values"},e("img",{src:"/assets/images/icons/cancel-white.svg",alt:"close",class:"close-icon",ref:t=>this.closeIcon=t}),this.internalValue.map(t=>e("input",{type:"hidden",name:`${this.name}[]`,value:t}))))}static get style(){return".input-multiselect-component .values{display:none}.input-multiselect-component .close-icon{width:16px;margin-left:4px}.input-multiselect-component .select-wrapper{margin:auto;max-width:600px;width:calc(100% - 40px)}.input-multiselect-component .select-pure__select{-ms-flex-align:center;align-items:center;background:#fff;border-radius:0;border:1px solid #000;cursor:pointer;display:-ms-flexbox;display:flex;font-size:16px;font-weight:500;-ms-flex-pack:left;justify-content:left;min-height:44px;padding:5px 10px;position:relative;-webkit-transition:.2s;transition:.2s}.input-multiselect-component .select-pure__options,.input-multiselect-component .select-pure__select{-webkit-box-shadow:0 2px 4px rgba(0,0,0,.04);box-shadow:0 2px 4px rgba(0,0,0,.04);-webkit-box-sizing:border-box;box-sizing:border-box;color:#363b3e;width:100%}.input-multiselect-component .select-pure__options{border-radius:4px;border:1px solid rgba(0,0,0,.15);display:none;left:0;max-height:221px;overflow-y:scroll;position:absolute;top:50px;z-index:5}.input-multiselect-component .select-pure__select--opened .select-pure__options{display:block}.input-multiselect-component .select-pure__option{background:#fff;border-bottom:1px solid #e4e4e4;-webkit-box-sizing:border-box;box-sizing:border-box;height:44px;line-height:25px;padding:10px}.input-multiselect-component .select-pure__option--selected{color:#e4e4e4;cursor:auto;pointer-events:none}.input-multiselect-component .select-pure__option--hidden{display:none}.input-multiselect-component .select-pure__selected-label{background:#057365;border-radius:4px;color:#fff;cursor:auto;display:-ms-inline-flexbox;display:inline-flex;margin:5px 10px 5px 0;padding:3px 7px}.input-multiselect-component .select-pure__selected-label:last-of-type{margin-right:0}.input-multiselect-component .select-pure__selected-label i{cursor:pointer;display:inline-block;margin-left:7px}.input-multiselect-component .select-pure__selected-label i:hover{color:#e4e4e4}.input-multiselect-component .select-pure__autocomplete{background:#f9f9f8;border-bottom:1px solid #e4e4e4;border-left:none;border-right:none;border-top:none;-webkit-box-sizing:border-box;box-sizing:border-box;font-size:16px;outline:none;padding:10px;width:100%}"}},_=class{constructor(e){t(this,e),this.defaultOptions=[{label:"1. Background Check",value:"background_check"},{label:"2. Refundable Deposit",value:"security_deposit"},{label:"3. Service Fee",value:"service_fee"},{label:"4. Move out cleaning",value:"move_out_cleaning"},{label:"5. Rent (Months due at ck in)",value:"months_due_on_checkin"},{label:"6. Rent (Days due at ck in)",value:"days_due_on_checkin"},{label:"7. Utilites",value:"utilities"},{label:"8. Tax",value:"tax"}],this.dtrOptions=[...this.defaultOptions],this.dbcOptions=[...this.defaultOptions]}componentWillRender(){if(this.item&&this.item.due_by_checkin){const t=[...this.dtrOptions].filter(t=>!this.item.due_by_checkin.includes(t.value));this.dtrOptions=t}if(this.item&&this.item.due_to_reserve){const t=[...this.dbcOptions].filter(t=>!this.item.due_to_reserve.includes(t.value));this.dbcOptions=t}}timelineChanged(t,e){const i=[...this.defaultOptions].filter(t=>!e.detail.includes(t.value));"due_by_checkin"===t?this.dueToReserveInput.updateOptions(i):this.dueByCheckinInput.updateOptions(i)}render(){return e("div",{class:"input-payment-timeline-component fieldset-inputs payment-timeline"},e("div",{class:"input"},e("label",{htmlFor:"months-due-on-checkin"},"Months Due upon Check In"),e("input",{id:"months-due-on-checkin",type:"number",name:"months_due_on_checkin",class:"apt212-input block",value:this.item?this.item.months_due_on_checkin:""})),e("div",{class:"input"},e("label",{htmlFor:"days-due-on-checkin"},"Days Due upon Check In"),e("input",{id:"days-due-on-checkin",type:"number",name:"days_due_on_checkin",class:"apt212-input block",value:this.item?this.item.days_due_on_checkin:""})),e("div",{class:"input"},e("label",{htmlFor:"duci_advance_payment_days"},"DUCI Payment Days in Advance"),e("select",{id:"duci_advance_payment_days",name:"duci_advance_payment_days",class:"apt212-input block"},["",...Array(31).keys()].map(t=>e("option",{value:t,selected:!!this.item&&this.item.duci_advance_payment_days===t},t)))),e("div",{class:"input"},e("label",{htmlFor:"due-to-reserve"},"Due Now to Reserve"),e("input-multiselect",{id:"due-to-reserve",name:"due_to_reserve",options:this.dtrOptions,value:this.item?this.item.due_to_reserve:[],onOnValueChange:t=>this.timelineChanged("due_to_reserve",t),ref:t=>this.dueToReserveInput=t})),e("div",{class:"input"},e("label",{htmlFor:"due-by-checkin"},"Due By Check In"),e("input-multiselect",{id:"due-by-checkin",name:"due_by_checkin",options:this.dbcOptions,value:this.item?this.item.due_by_checkin:[],onOnValueChange:t=>this.timelineChanged("due_by_checkin",t),ref:t=>this.dueByCheckinInput=t})))}static get style(){return".input-payment-timeline-component{display:grid;gap:8px;-ms-flex-align:center;align-items:center;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}\@media (min-width:1200px){.input-payment-timeline-component{grid-template-columns:repeat(auto-fit,minmax(350px,1fr))}}"}},y=class{constructor(e){t(this,e),this.disableKeys=[],this.rateChanged=s(this,"rateChanged",7)}changeDefaultMonthRate(t,e){c(t.target.value)?this.rateChanged.emit({key:e,value:t.target.value}):r.error("Invalid number entered")}render(){return e("div",{class:"input-pricing-component fieldset-inputs pricing"},this.disableKeys.includes("monthly_rate")?null:e("div",{class:"input"},e("label",{htmlFor:"listing-monthly-rate"},"Monthly Rate"),e("input",{type:"text",id:"listing-monthly-rate",name:`${this.name}[default][monthly_rate]`,class:"apt212-input block",value:this.rate?this.rate.monthly_rate:"",onChange:t=>this.changeDefaultMonthRate(t,"monthly_rate")})),this.disableKeys.includes("tax_percent")?null:e("div",{class:"input"},e("label",{htmlFor:"listing-tax"},"Tax (%)"),e("input",{type:"text",id:"listing-tax",name:`${this.name}[default][tax_percent]`,class:"apt212-input block",value:this.rate?this.rate.tax_percent:"",onChange:t=>this.changeDefaultMonthRate(t,"tax_percent")})),this.disableKeys.includes("background_check_rate")?null:e("div",{class:"input"},e("label",{htmlFor:"listing-background-check"},"Background Check"),e("input",{type:"text",id:"listing-background-check",name:`${this.name}[default][background_check_rate]`,class:"apt212-input block",value:this.rate?this.rate.background_check_rate:"",onChange:t=>this.changeDefaultMonthRate(t,"background_check_rate")})),this.disableKeys.includes("service_fee_host")?null:e("div",{class:"input"},e("label",{htmlFor:"listing-service-fee-host"},"Service Fee Host Side (%)"),e("input",{type:"text",id:"listing-service-fee-host",name:`${this.name}[default][service_fee_host]`,class:"apt212-input block",value:this.rate?this.rate.service_fee_host:"",onChange:t=>this.changeDefaultMonthRate(t,"service_fee_host")})),this.disableKeys.includes("service_fee_client")?null:e("div",{class:"input"},e("label",{htmlFor:"listing-service-fee-client"},"Service Fee Client Side (%)"),e("input",{type:"text",id:"listing-service-fee-client",name:`${this.name}[default][service_fee_client]`,class:"apt212-input block",value:this.rate?this.rate.service_fee_client:"",onChange:t=>this.changeDefaultMonthRate(t,"service_fee_client")})),this.disableKeys.includes("security_deposit_percent")?null:e("div",{class:"input"},e("label",{htmlFor:"listing-security-deposit"},"Security Deposit (%)"),e("input",{type:"text",id:"listing-security-deposit",name:`${this.name}[default][security_deposit_percent]`,class:"apt212-input block",value:this.rate?this.rate.security_deposit_percent:"",onChange:t=>this.changeDefaultMonthRate(t,"security_deposit_percent")}),e("div",{class:"help-text"},"% of monthly rate")))}static get style(){return".input-pricing-component{display:grid;gap:8px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr))}"}},m=class{constructor(e){t(this,e)}utilitiesChanged(){const t=this.el.querySelectorAll("input.utility");let e=0;t.forEach(t=>{t.value&&c(t.value)&&(e+=parseFloat(t.value))});const i=this.el.querySelector("#listing-monthly-utilities");i&&(i.value=e.toFixed(2))}render(){return e("div",{class:"input-utilities-component fieldset-inputs utilities"},e("div",{class:"input"},e("label",{htmlFor:"listing-cable"},"Cable"),e("input",{type:"text",id:"listing-cable",name:"utility_cable",class:"apt212-input block utility",value:this.item?this.item.utility_cable:"",onChange:()=>this.utilitiesChanged()})),e("div",{class:"input"},e("label",{htmlFor:"listing-wifi"},"Wifi"),e("input",{type:"text",id:"listing-wifi",name:"utility_wifi",class:"apt212-input block utility",value:this.item?this.item.utility_wifi:"",onChange:()=>this.utilitiesChanged()})),e("div",{class:"input"},e("label",{htmlFor:"listing-electricity"},"Electricity"),e("input",{type:"text",id:"listing-electricity",name:"utility_electricity",class:"apt212-input block utility",value:this.item?this.item.utility_electricity:"",onChange:()=>this.utilitiesChanged()})),e("div",{class:"input"},e("label",{htmlFor:"listing-cleaning"},"Monthly Cleaning"),e("input",{type:"text",id:"listing-cleaning",name:"utility_cleaning",class:"apt212-input block utility",value:this.item?this.item.utility_cleaning:"",onChange:()=>this.utilitiesChanged()})),e("div",{class:"input"},e("label",{htmlFor:"listing-monthly-utilities"},"Total Monthly Utilities"),e("input",{type:"number",id:"listing-monthly-utilities",name:"monthly_utilities",class:"apt212-input block",value:this.item?this.item.monthly_utilities.toFixed(2):"",disabled:!0})),e("div",{class:"input"},e("label",{htmlFor:"listing-moveout-fee"},"Move out fee"),e("input",{type:"number",id:"listing-moveout-fee",name:"move_out_fee",class:"apt212-input block",value:this.item?this.item.move_out_fee:"",step:.01})))}get el(){return i(this)}static get style(){return".input-utilities-component.utilities{display:grid;gap:8px;-ms-flex-align:center;align-items:center;grid-template-columns:repeat(auto-fit,minmax(200px,1fr))}"}};export{o as input_month_rates,v as input_multiselect,_ as input_payment_timeline,y as input_pricing,m as input_utilities};