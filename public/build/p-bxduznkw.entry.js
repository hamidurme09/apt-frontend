import{r as t,c as e,h as i,d as s,j as n,e as o,H as a}from"./p-f5b6b644.js";import"./p-1ba263c2.js";import{E as r}from"./p-19ec51eb.js";import"./p-811a61b7.js";import"./p-30f68cd2.js";import{c,a as l,u}from"./p-74149bb1.js";import{R as h}from"./p-9d127c97.js";import{b as d}from"./p-ca0e51b7.js";import{a as f,f as m,c as p}from"./p-08706a58.js";import{s as v}from"./p-c041151f.js";import{I as b}from"./p-283e4737.js";import{L as g}from"./p-9d50b311.js";import{A as y}from"./p-2351c48a.js";import{T as k}from"./p-2c007f74.js";import{M as w}from"./p-d40f2c8b.js";import{a as T,c as E}from"./p-661df142.js";import{g as S}from"./p-15e55934.js";import{t as j}from"./p-7295e390.js";import{s as L}from"./p-4c12f224.js";const x=class{constructor(i){t(this,i),this.details=null,this.isMobile=!0,this.store=e(this,"store")}componentWillLoad(){this.store.mapStateToProps(this,t=>({isMobile:L.getIsMobile(t),checkinDate:d.getCheckinDate(t),checkoutDate:d.getCheckoutDate(t),guests:d.getGuests(t),details:d.getBookingDetails(t),neighborhoods:j.getNeighborhoods(t),bedroomTypes:j.getBedroomTypes(t),buildingTypes:j.getBuildingTypes(t)}))}setTooltip(t){t.stopPropagation();const e=t.currentTarget.nextSibling;this.el.querySelectorAll(".tooltip.active").forEach(t=>{t!==e&&t.classList.remove("active")}),e&&(e.classList.toggle("active"),e.style.marginTop=`calc(0px - ${Math.round(e.clientHeight/2)}px + 8px)`)}closeTooltips(){this.el.querySelectorAll(".tooltip.active").forEach(t=>t.classList.remove("active"))}shareApartment(){const t=Object.assign(document.createElement("ion-modal"),{component:"apt212-modal-booking-frame",cssClass:"share-listing-modal",componentProps:{component:"share-listing",componentProps:{items:[this.item]}}});return document.body.appendChild(t),t.present()}downloadPDF(){const t=`${r.getInstance().get("API_URL")}/pdf/booking-details/${this.item.id}?checkindate=${f(this.checkinDate,"m/d/Y")}&checkoutdate=${f(this.checkoutDate,"m/d/Y")}&guests=${this.guests}`;window.location=t}showAskQuestion(){return w.contactUs(this.item)}bookNow(){h.forward("booking");const t=this.el.closest("ion-modal");t&&t.dismiss()}render(){if(!this.details)return i("ion-spinner",{name:"lines"});const t=j.getNeighborhoodById(this.item.neighborhood_ids[0],this.neighborhoods),e=j.getBedroomTypeById(this.item.bedroom_type_id,this.bedroomTypes),s=j.getBuildingTypeById(this.item.building_type_id,this.buildingTypes);let n=this.details.term.months?`${this.details.term.months} months`:"";this.details.term.months&&this.details.term.days&&(n+=" and "),this.details.term.days&&(n+=`${this.details.term.days} days`);const o=[{tooltip:"Move in date.",description:`Check In ${this.details.checkindate}:`,center:i("img",{src:"/assets/images/icons/arrow.svg",role:"presentation",class:"arrow-right"}),value:`Check Out ${this.details.checkoutdate}`},{tooltip:"Price of rent, per month.",description:"Monthly Rent:",center:"",value:this.details.monthly_rent?m(this.details.monthly_rent):null},{tooltip:"Price per month, divided by the total amount of days in the month.",description:"Night rate:",center:"",value:this.details.night_rate?m(this.details.night_rate,{minimumFractionDigits:2,maximumFractionDigits:2}):null},{tooltip:"Length of your stay, from check-in to check-out.",description:"Total Term:",center:"",value:n},{tooltip:"Total number of guests staying in the apartment",description:"Number of guests:",center:"",value:this.details.guests}],a=[{tooltip:"The cost for a background check, required for all guests to ensure safety.",description:"Background checks:",center:"",value:this.details.background_checks?m(this.details.background_checks):null},{tooltip:"Sum of (monthly rate x months) + (nightly rate x days).",description:"Rent:",center:"",value:this.details.rent?m(this.details.rent):null},{tooltip:"New York Occupancy & Hotel tax.",description:"Tax:",center:"",value:this.details.tax?m(this.details.tax):null},{tooltip:"Sum of your total utilities for the duration of your stay [Utilities includes: Electricity, Gas, Cable TV, Wifi].",description:"Utilities:",center:"",value:this.details.utilities?m(this.details.utilities):null},{tooltip:"Fees help cover Apt212 service costs, including access to a personal agent to assist with the entire rental process, showing units, and processing paperwork.",description:"Service Fee:",center:"",value:this.details.service_fee?m(this.details.service_fee):null},{tooltip:"A refundable deposit protects hosts, and guests, from any accidental damages.",description:"Refundable Deposit:",center:"",value:this.details.deposit?m(this.details.deposit):null,class:"highlight"},{tooltip:"The sum of all costs of your rental, from check in to check out.  No hidden fees!",description:"Total:",center:"",value:this.details.total?m(this.details.total):null}],r=[{tooltip:"Portion of the total due now in order to secure your reservation.",description:"Due now to reserve:",center:"",value:this.details.timeline.due_to_reserve?m(this.details.timeline.due_to_reserve):null,class:"bg-highlight"},{tooltip:"Portion of the total due by your check in date.",description:`Due by check in (${this.details.timeline.due_by_checkin_date}):`,center:"",value:this.details.timeline.due_by_checkin?m(this.details.timeline.due_by_checkin):null},{tooltip:"Total of all future payments minus the due now and due by check in.  Future payment due dates will be outlined on your lease agreement.",description:"Future Payments:",center:"",value:this.details.timeline.future_payments?m(this.details.timeline.future_payments):null},{tooltip:"The refundable Deposit that will be paid back to you within a maximum of 14 days from your check out date.",description:`Deposit Refund (${this.details.timeline.deposit_refund_date}):`,center:"",value:this.details.timeline.deposit_refund?m(this.details.timeline.deposit_refund):null,class:"highlight"}];return i("div",{class:"booking-details-component",onClick:()=>this.closeTooltips()},i("div",{class:"left"},i("div",{class:"details-section"},i("h3",null,"Booking Details"),o.map(t=>i("div",{class:"detail-item"},i("div",{class:"info-wrapper"},i("button",{class:"button-reset","aria-label":"Line item details",onClick:t=>this.setTooltip(t)},i("img",{src:"/assets/images/icons/question-circle.svg",alt:"info",class:"info"})),t.tooltip.length?i("div",{class:"tooltip"},i("div",{class:"indicator"}),t.tooltip):null),i("div",{class:"description"},t.description),i("div",{class:"center text-center"},t.center),i("div",{class:"value"},t.value)))),i("div",{class:"details-section breakdown"},i("h3",null,"Total Breakdown"),a.map(t=>{if(!t.value)return;let e={"detail-item":!0};return t.hasOwnProperty("class")&&(e[t.class]=!0),i("div",{class:e},i("div",{class:"info-wrapper"},i("button",{class:"button-reset","aria-label":"Line item details",onClick:t=>this.setTooltip(t)},i("img",{src:"/assets/images/icons/question-circle.svg",alt:"info",class:"info"})),t.tooltip.length?i("div",{class:"tooltip"},i("div",{class:"indicator"}),t.tooltip):null),i("div",{class:"description"},t.description),i("div",{class:"center text-center"},t.center),i("div",{class:"value"},t.value))})),i("div",{class:"details-section payment"},i("h3",null,"Payment Timeline"),r.map(t=>{if(!t.value)return;let e={"detail-item":!0};return t.hasOwnProperty("class")&&(e[t.class]=!0),i("div",{class:e},i("div",{class:"info-wrapper"},i("button",{class:"button-reset","aria-label":"Line item details",onClick:t=>this.setTooltip(t)},i("img",{src:"/assets/images/icons/question-circle.svg",alt:"info",class:"info"})),t.tooltip.length?i("div",{class:"tooltip"},i("div",{class:"indicator"}),t.tooltip):null),i("div",{class:"description"},t.description),i("div",{class:"center text-center"},t.center),i("div",{class:"value"},t.value))})),i("div",{class:"guarantee mobile-only"},i("div",{class:"title"},i("lazy-image",{src:"/assets/images/icons/shield_guarantee.svg"}),"APT212 Tenant Guarantee"),i("p",null,"APT212 vets each hold and property and guarantees each listing is accurate as described.  No Hidden Fees.")),i("div",{class:"action-buttons"},i("button",{"aria-label":"Book Now",class:"button-dark block",onClick:()=>this.bookNow()},"Book Now"),i("button",{"aria-label":"Ask a question",class:"button-light outline block text-upper",onClick:()=>this.showAskQuestion()},"Ask a question"))),i("div",{class:"right"},i("div",{class:"card"},this.item.images.length?i("img",{src:this.item.images[0].small,class:"feature-image"}):null,i("div",{class:"card-content"},i("h4",null,this.item.cross_streets),i("div",{class:"neighborhood"},t.name),i("div",{class:"price"},m(this.item.rate)," /month"),i("div",{class:"bed-bath"},i("div",null,i("lazy-image",{src:"/assets/images/icons/bedroom.svg",class:"bedrooms",alt:"bedroom"})," ",S(e)),i("div",{class:"divider"},"|"),i("div",null,i("lazy-image",{src:"/assets/images/icons/bathroom.svg",class:"bathrooms",alt:"bathroom"})," ",this.item.bathrooms," Bathroom")),i("div",{class:"rating-amenities"},i("div",{class:"amenities"},s.name),i("star-rating",{stars:5,size:this.isMobile?10:16,rating:s.rating,readonly:!0})),i("div",{class:"webid"},"Web Id #",this.item.id))),i("div",{class:"guarantee desktop-only"},i("div",{class:"title"},i("lazy-image",{src:"/assets/images/icons/shield_guarantee.svg"}),"APT212 Tenant Guarantee"),i("p",null,"APT212 vets each hold and property and guarantees each listing is accurate as described.  No Hidden Fees.")),i("div",{class:"share-download"},i("button",{class:"button-reset","aria-label":"Share",onClick:()=>this.shareApartment()},i("lazy-image",{src:"/assets/images/icons/share.svg"})," Share"),i("button",{class:"button-reset","aria-label":"Download PDF",onClick:()=>this.downloadPDF()},i("lazy-image",{src:"/assets/images/icons/pdf.svg"})," Download"))))}get el(){return s(this)}static get style(){return".booking-details-component,.booking-details-component .left,.booking-details-component .right{width:100%}\@media (min-width:1200px){.booking-details-component{display:-ms-flexbox;display:flex;padding-top:20px}.booking-details-component .left{width:60%;padding-right:1.5rem}.booking-details-component .right{padding-top:30px;width:40%}}.booking-details-component .details-section{padding-bottom:.5rem}.booking-details-component .details-section.breakdown{border-top:1px dashed #000;border-bottom:1px dashed #000}.booking-details-component .detail-item{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;padding:2px 8px;height:24px;margin-left:-8px}.booking-details-component .detail-item.highlight{color:#057365}.booking-details-component .detail-item.bg-highlight{background-color:rgba(5,115,101,.1);height:33px}.booking-details-component .detail-item .info{width:13px;vertical-align:middle;margin-right:.5rem}.booking-details-component .detail-item .center{-ms-flex-positive:1;flex-grow:1}.booking-details-component .detail-item .arrow-right{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.booking-details-component .detail-item .info-wrapper{position:relative}.booking-details-component .detail-item .info-wrapper button{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.booking-details-component .detail-item .info-wrapper .tooltip{display:none;position:absolute;padding:.5rem;border:1px solid #000;width:200px;font-size:12px;left:100%;top:0;background-color:#fff;z-index:1;text-align:center;border-radius:4px}.booking-details-component .detail-item .info-wrapper .tooltip.active{display:block}.booking-details-component .detail-item .info-wrapper .tooltip .indicator{width:6px;height:6px;position:absolute;border-top:1px solid #000;border-left:1px solid #000;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);left:0;top:calc(50% - 4px);margin-left:-4px;background:#fff}.booking-details-component .action-buttons{padding-top:14px}\@media (min-width:1200px){.booking-details-component .action-buttons{padding-top:50px}}.booking-details-component .action-buttons button{padding-top:16px;padding-bottom:16px}.booking-details-component .action-buttons button:first-child{margin-bottom:8px}.booking-details-component .card{display:none;border:1px solid #969499;font-size:12px}\@media (min-width:1200px){.booking-details-component .card{display:block}}.booking-details-component .card .card-content{padding:1rem .5rem 1.5rem}.booking-details-component .card h4{margin:0;text-transform:none}.booking-details-component .card .neighborhood{padding-bottom:.5rem}.booking-details-component .card .price{padding-bottom:4px}.booking-details-component .card .feature-image{width:100%;height:160px;-o-object-fit:cover;object-fit:cover}.booking-details-component .card .bed-bath{font-size:12px;padding-bottom:.5rem}.booking-details-component .card .bed-bath,.booking-details-component .card .bed-bath>div{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.booking-details-component .card .bed-bath .divider{padding:0 1rem}.booking-details-component .card .bathrooms,.booking-details-component .card .bedrooms{width:.625rem;height:.625rem;margin-right:.25rem}\@media (min-width:1200px){.booking-details-component .card .bathrooms,.booking-details-component .card .bedrooms{width:1rem;height:1rem;margin-right:.5rem}}.booking-details-component .card .bedrooms{margin-top:-1px}.booking-details-component .card .bathrooms{margin-top:-3px}.booking-details-component .card .webid{padding-top:4px}.booking-details-component .rating-amenities{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;font-size:12px}.booking-details-component .rating-amenities .amenities{padding-right:.5rem;padding-bottom:4px}.booking-details-component .guarantee{display:none;margin-top:16px;background-color:rgba(5,115,101,.1);padding:1.5rem 1rem 54px;font-size:14px}\@media (min-width:1200px){.booking-details-component .guarantee.desktop-only{display:block;padding:1.5rem 1rem 190px}}.booking-details-component .guarantee.mobile-only{display:block}\@media (min-width:1200px){.booking-details-component .guarantee.mobile-only{display:none}}.booking-details-component .guarantee .title{font-weight:700}.booking-details-component .guarantee .title lazy-image{width:14px;vertical-align:middle;margin-right:.5rem}.booking-details-component .share-download{padding-top:1.5rem}.booking-details-component .share-download button{font-size:16px;text-align:center;width:50%}.booking-details-component .share-download button lazy-image{height:16px;max-width:16px;max-height:16px;margin-right:.5rem;vertical-align:middle}"}},C=class{constructor(e){t(this,e),this.setViewEvent=n(this,"setViewEvent",7),this.showGuestInput=n(this,"showGuestInput",7)}render(){return i("div",{class:"booking-mobile-body-component"},i("div",{class:"rate-date-details"},i("div",null,i("span",{class:"highlight"},m(this.item.rate))," per month"),i("div",null,i("span",{class:"highlight"},f(this.item.available_date,"m.d.y"))," next available date")),i("page-listing-checkin",{item:this.item,onShowCheckInInput:()=>this.setViewEvent.emit("checkinInput"),onShowCheckOutInput:()=>this.setViewEvent.emit("checkoutInput"),onShowGuestsInput:()=>this.showGuestInput.emit(),onShowSeasonalRates:()=>this.setViewEvent.emit("seasonalRates"),onShowBookingDetails:()=>this.setViewEvent.emit("bookingDetails"),onShowAskQuestionInput:()=>w.contactUs()}))}static get style(){return".booking-mobile-body-component{display:block;width:100%;height:100%}.booking-mobile-body-component .rate-date-details{font-size:16px;font-weight:700;padding-top:3rem}.booking-mobile-body-component .rate-date-details>div{padding-bottom:1.5rem}.booking-mobile-body-component .highlight{font-size:24px}"}},D=class{constructor(i){t(this,i),this.type="checkin",this.inPopover=!1,this.calendarSize=1.6,this.store=e(this,"store")}componentWillLoad(){this.store.mapStateToProps(this,t=>({checkinDate:d.getCheckinDate(t),checkoutDate:d.getCheckoutDate(t)})),this.store.mapDispatchToProps(this,{setCheckinDate:T,setCheckoutDate:E})}closePopover(){const t=this.el.closest("apt212-popover");t&&t.dismiss()}dateSelected(t){const e=t.detail?t.detail:"";"checkin"===this.type?this.setCheckinDate(this.item.id,e):this.setCheckoutDate(this.item.id,e),this.closePopover()}getMinDate(){let t=new Date;if(this.item.available_date){const e=p(this.item.available_date);t=e>t?e:t}return t}render(){return i("div",{class:"input-booking-date-component"},this.inPopover?i("div",{class:{"popover-marker":!0,checkin:"checkin"===this.type,checkout:"checkout"===this.type}}):null,i("div",{class:"picker"},i("apt212-datepicker",{size:this.calendarSize,onSelected:t=>this.dateSelected(t),value:"checkin"===this.type?this.checkinDate:this.checkoutDate,minDate:this.getMinDate()})),i("div",{class:"disclaimer"},"Minimum Stay 30 Days"),this.inPopover?i("ion-button",{"aria-label":"close",fill:"clear",class:"close reset",onClick:()=>this.closePopover()},i("ion-icon",{src:"/assets/images/icons/cancel.svg",slot:"icon-only"})):null)}get el(){return s(this)}static get style(){return".input-booking-date-component{width:100%;position:relative}.input-booking-date-component .popover-marker{position:absolute;width:12px;height:12px;-webkit-transform:rotate(45deg);transform:rotate(45deg);background:#fff;border-top:1px solid #000;border-left:1px solid #000;top:-7px}.input-booking-date-component .popover-marker.checkin{left:72px}.input-booking-date-component .popover-marker.checkout{right:72px}.input-booking-date-component .picker{padding-top:20px;width:100%;min-height:300px}.input-booking-date-component .close{position:absolute;top:0;right:0;z-index:9002}.input-booking-date-component .disclaimer{font-weight:700;padding:1.5rem 1.5rem 1.5rem 2.3rem}"}},O=class{constructor(e){t(this,e),this.translucent=!1}render(){const t=o(this),e=this.translucent;return i(a,{role:"contentinfo",class:{[t]:!0,[`footer-${t}`]:!0,"footer-translucent":e,[`footer-translucent-${t}`]:e}})}static get style(){return"ion-footer{display:block;position:relative;-ms-flex-order:1;order:1;width:100%;z-index:10}ion-footer ion-toolbar:last-child{padding-bottom:var(--ion-safe-area-bottom,0)}.footer-md:before{left:0;top:-2px;bottom:auto;background-position:left 0 top 0;position:absolute;width:100%;height:2px;background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAHBAMAAADzDtBxAAAAD1BMVEUAAAAAAAAAAAAAAAAAAABPDueNAAAABXRSTlMUCS0gBIh/TXEAAAAaSURBVAjXYxCEAgY4UIICBmMogMsgFLtAAQCNSwXZKOdPxgAAAABJRU5ErkJggg==\");background-repeat:repeat-x;content:\"\"}:host-context([dir=rtl]) .footer-md:before,[dir=rtl] .footer-md:before{left:unset;right:unset;right:0;background-position:right 0 top 0}.footer-md[no-border]:before{display:none}"}},A=class{constructor(e){t(this,e)}getMonth(t){const e=new Date((new Date).setDate(1)).setMonth(t);return f(e,"MMMM")}render(){const t=this.item.rates.filter(t=>"default"!==t.month);return t.sort((t,e)=>t.month===e.month?0:parseInt(t.month)>parseInt(e.month)?1:-1),i("div",{class:"seasonal-rates-component"},i("h2",null,"Seasonal Rates"),i("p",null,"Different seasons have different rates -- rates are reflected on the invoice based on the rates below.",i("br",null),"If different months with different rates are selected the price displayed will be the amortized price."),t.map(t=>i("div",{class:"rate"},i("span",{class:"month"},this.getMonth(t.month)),i("span",{class:"value"},m(t.display_rate)))))}static get style(){return".seasonal-rates-component h2{text-transform:none;font-weight:600}.seasonal-rates-component .rate{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;height:46px;border-bottom:1px dashed #000;font-weight:600;font-size:20px}\@media (min-width:1200px){.seasonal-rates-component .rate{height:50px}}.seasonal-rates-component .rate .month{-ms-flex-positive:1;flex-grow:1}"}},P=u(c((function(t){var e;e=function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=c(i(1)),a=c(i(3)),r=c(i(4));function c(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return s.resolveOptions(i),s.listenClick(t),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),n(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===s(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,r.default)(t,"click",(function(t){return e.onClick(t)}))}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new o.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return u("action",t)}},{key:"defaultTarget",value:function(t){var e=u("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return u("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,i=!!document.queryCommandSupported;return e.forEach((function(t){i=i&&!!document.queryCommandSupported(t)})),i}}]),e}(a.default);function u(t,e){var i="data-clipboard-"+t;if(e.hasAttribute(i))return e.getAttribute(i)}t.exports=l},function(t,e,i){var s,n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),a=(s=i(2))&&s.__esModule?s:{default:s},r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolveOptions(e),this.initSelection()}return o(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,a.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,a.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":n(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=r},function(t){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var i=t.hasAttribute("readonly");i||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),i||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var s=window.getSelection(),n=document.createRange();n.selectNodeContents(t),s.removeAllRanges(),s.addRange(n),e=s.toString()}return e}},function(t){function e(){}e.prototype={on:function(t,e,i){var s=this.e||(this.e={});return(s[t]||(s[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){var s=this;function n(){s.off(t,n),e.apply(i,arguments)}return n._=e,this.on(t,n,i)},emit:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),s=0,n=i.length;s<n;s++)i[s].fn.apply(i[s].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),s=i[t],n=[];if(s&&e)for(var o=0,a=s.length;o<a;o++)s[o].fn!==e&&s[o].fn._!==e&&n.push(s[o]);return n.length?i[t]=n:delete i[t],this}},t.exports=e},function(t,e,i){var s=i(5),n=i(6);t.exports=function(t,e,i){if(!t&&!e&&!i)throw new Error("Missing required arguments");if(!s.string(e))throw new TypeError("Second argument must be a String");if(!s.fn(i))throw new TypeError("Third argument must be a Function");if(s.node(t))return function(t,e,i){return t.addEventListener(e,i),{destroy:function(){t.removeEventListener(e,i)}}}(t,e,i);if(s.nodeList(t))return function(t,e,i){return Array.prototype.forEach.call(t,(function(t){t.addEventListener(e,i)})),{destroy:function(){Array.prototype.forEach.call(t,(function(t){t.removeEventListener(e,i)}))}}}(t,e,i);if(s.string(t))return function(t,e,i){return n(document.body,t,e,i)}(t,e,i);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var i=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===i||"[object HTMLCollection]"===i)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e,i){var s=i(7);function n(t,e,i,s,n){var a=o.apply(this,arguments);return t.addEventListener(i,a,n),{destroy:function(){t.removeEventListener(i,a,n)}}}function o(t,e,i,n){return function(i){i.delegateTarget=s(i.target,e),i.delegateTarget&&n.call(t,i)}}t.exports=function(t,e,i,s,o){return"function"==typeof t.addEventListener?n.apply(null,arguments):"function"==typeof i?n.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,(function(t){return n(t,e,i,s,o)})))}},function(t){if("undefined"!=typeof Element&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}}])},t.exports=e()}))),_=class{constructor(i){t(this,i),this.view="email",this.errors=[],this.store=e(this,"store")}componentWillLoad(){this.store.mapStateToProps(this,t=>({bookingId:d.getApartmentId(t),checkindate:d.getCheckinDate(t),checkoutdate:d.getCheckoutDate(t),guests:d.getGuests(t)}))}componentDidLoad(){this.copytarget&&(this.clipboard=new P(this.copytarget),this.clipboard.on("success",()=>k.success("The link has been copied to your clipboard")),this.clipboard.on("error",()=>k.error("There was an issue copying the link")))}close(){const t=this.el.closest("ion-modal");t&&t.dismiss()}async submitForm(t){t.preventDefault();const e=v(this.form,{hash:!0,empty:!0});if(this.checkErrors(e),this.errors.length)return void k.error("Please fill out the email and message and try again");const i=Object.assign(Object.assign({},e),{ids:this.items.map(t=>t.id),checkin:this.checkindate?f(this.checkindate,"m/d/y"):null,checkout:this.checkoutdate?f(this.checkoutdate,"m/d/y"):null,guests:this.guests,urls:this.items.map(t=>this.getLink(t))});try{await g.showLoading(),await y.shareListing(i),k.success("Thank you, your message has been sent"),this.close()}catch(t){k.error(t.message)}await g.hideLoading()}checkErrors(t){const e=[];["email","message"].forEach(i=>{t[i]||e.push(i)}),t.email&&!b.validate(t.email)&&e.push("email"),this.errors=e}getLink(t){const e=r.getInstance().get("BASE_URL")+t.url_path,i={};return this.bookingId===t.id&&(this.checkindate&&(i.checkin=f(this.checkindate,"m/d/y")),this.checkoutdate&&(i.checkout=f(this.checkoutdate,"m/d/y")),this.guests&&(i.guests=this.guests)),Object.keys(i).length?e+"?"+Object.keys(i).map(t=>t+"="+i[t]).join("&"):e}render(){return i("div",{class:"share-listing-component"},i("h2",{class:"text-center"},"Share Apartment"),1===this.items.length?i("div",{class:"share-nav"},i("button",{class:"button-reset has-icon","aria-label":"Send Email",onClick:()=>this.view="email"},i("img",{src:"/assets/images/icons/email.svg"}),"Send Email"),i("button",{class:"button-reset has-icon","aria-label":"Copy Link",onClick:()=>this.view="copylink"},i("img",{src:"/assets/images/icons/link.svg"}),"Copy Link")):i("div",{style:{height:"70px"}}),i("form",{onSubmit:t=>this.submitForm(t),class:{hidden:"email"!==this.view},ref:t=>this.form=t},i("label",{htmlFor:"share-listing-email"},"Send To"),i("div",{class:"email-input"},i("input",{id:"share-listing-email",type:"email",name:"email",placeholder:"Enter the recipient's email address",class:{error:this.errors.includes("email")}}),i("img",{src:"/assets/images/icons/email.svg",role:"presentation",alt:""})),i("label",{htmlFor:"share-listing-message"},"Message"),i("textarea",{id:"share-listing-message",placeholder:"Enter your message",name:"message",class:{error:this.errors.includes("message")}}),i("input",{type:"submit",class:"button-dark submit",value:"SEND"})),1===this.items.length?i("form",{onSubmit:t=>t.preventDefault(),class:{hidden:"copylink"!==this.view}},i("label",{htmlFor:"share-listing-copytext",class:"sr-only"}),i("input",{id:"share-listing-copytext",type:"text",value:this.getLink(this.items[0]),readOnly:!0,class:"text"}),i("input",{type:"submit",class:"button-dark submit copytext",value:"COPY LINK","data-clipboard-target":"#share-listing-copytext",ref:t=>this.copytarget=t})):null)}get el(){return s(this)}static get style(){return".share-listing-component .hidden{display:none}.share-listing-component .share-nav{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;margin-top:32px;margin-bottom:54px}\@media (min-width:1200px){.share-listing-component .share-nav{display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;margin-top:25px;margin-bottom:30px}.share-listing-component .share-nav>:first-child{margin-right:50px}}.share-listing-component .share-nav button{font-weight:700}.share-listing-component .share-nav button:first-child{margin-bottom:24px}\@media (min-width:1200px){.share-listing-component .share-nav button:first-child{margin-bottom:0}}.share-listing-component .share-nav button img{margin-right:.75rem;margin-top:2px}.share-listing-component input.text,.share-listing-component input[type=email],.share-listing-component input[type=text]{height:40px;border:1px solid #000;margin-bottom:24px;width:100%}.share-listing-component input.text::-webkit-input-placeholder,.share-listing-component input[type=email]::-webkit-input-placeholder,.share-listing-component input[type=text]::-webkit-input-placeholder{color:#000}.share-listing-component input.text::-moz-placeholder,.share-listing-component input[type=email]::-moz-placeholder,.share-listing-component input[type=text]::-moz-placeholder{color:#000}.share-listing-component input.text:-ms-input-placeholder,.share-listing-component input[type=email]:-ms-input-placeholder,.share-listing-component input[type=text]:-ms-input-placeholder{color:#000}.share-listing-component input.text::-ms-input-placeholder,.share-listing-component input[type=email]::-ms-input-placeholder,.share-listing-component input[type=text]::-ms-input-placeholder{color:#000}.share-listing-component input.text::placeholder,.share-listing-component input[type=email]::placeholder,.share-listing-component input[type=text]::placeholder{color:#000}\@media (min-width:1200px){.share-listing-component input.text,.share-listing-component input[type=email],.share-listing-component input[type=text]{height:33px;border:1px solid #979797}}.share-listing-component input.text.error,.share-listing-component input[type=email].error,.share-listing-component input[type=text].error{border-color:red}.share-listing-component label{display:block;padding-bottom:3px}.share-listing-component textarea{width:100%;height:184px;border:1px solid #000;margin-bottom:40px;padding:5px 12px}.share-listing-component textarea::-webkit-input-placeholder{color:#000}.share-listing-component textarea::-moz-placeholder{color:#000}.share-listing-component textarea:-ms-input-placeholder{color:#000}.share-listing-component textarea::-ms-input-placeholder{color:#000}.share-listing-component textarea::placeholder{color:#000}\@media (min-width:1200px){.share-listing-component textarea{height:92px;border:1px solid #979797}}.share-listing-component .submit{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;padding:0;width:100%;height:48px;font-size:12px;margin:0 auto;margin-bottom:16px}\@media (min-width:1200px){.share-listing-component .submit{width:124px;height:35px}}.share-listing-component .email-input{position:relative}.share-listing-component .email-input img{position:absolute;width:18px;top:15px;right:10px}\@media (min-width:1200px){.share-listing-component .email-input img{top:10px}}"}};export{x as booking_details,C as booking_mobile_body,D as input_booking_date,O as ion_footer,A as seasonal_rates,_ as share_listing};