import{r as s,c as t,h as i}from"./p-f5b6b644.js";import"./p-1ba263c2.js";import{E as o}from"./p-19ec51eb.js";import"./p-811a61b7.js";import"./p-74149bb1.js";import{S as e}from"./p-77d69141.js";import{b as n,c as a,a as l,f as h}from"./p-08706a58.js";import{a as c,c as r,b as p}from"./p-661df142.js";import{s as m}from"./p-3fe3eb5a.js";import{t as b}from"./p-7295e390.js";import{A as u}from"./p-d2e35ecb.js";const d=class{constructor(i){s(this,i),this.loaded=!1,this.taxonomyLoaded=!1,this.searchResults=[],this.item=null,this.store=t(this,"store")}async componentWillLoad(){this.store.mapStateToProps(this,s=>({searchResults:m.getListings(s),taxonomyLoaded:b.getTaxonomyLoaded(s)})),this.store.mapDispatchToProps(this,{bookingSetCheckin:c,bookingSetCheckout:r,bookingSetGuests:p});let s=o.getInstance().get("BASE_URL")+"/404";const t=this.searchResults.find(s=>s.id===this.apartmentId);if(t)this.item=t,this.loaded=!0;else try{const t=await u.getApartment(this.apartmentId);t&&t.hasOwnProperty("id")&&t.id===this.apartmentId&&(this.item=t,this.loaded=!0,s=o.getInstance().get("BASE_URL")+this.item.url_path)}catch(s){this.loaded=!0}e.setCanonical(s),n("checkin")&&this.bookingSetCheckin(this.apartmentId,a(n("checkin"))),n("checkout")&&this.bookingSetCheckout(this.apartmentId,a(n("checkout"))),n("guests")&&this.bookingSetGuests(this.apartmentId,n("guests"))}showMobileBookingDetails(){const s=Object.assign(document.createElement("ion-modal"),{component:"mobile-booking-modal",cssClass:"mobile-booking-modal",componentProps:{item:this.item}});return document.body.appendChild(s),s.present()}render(){return[i("ion-content",null,i("app-header",null),i("div",{class:"page-listing"},!this.item&&this.loaded&&this.taxonomyLoaded?i("section",{class:"section"},i("content-404",null)):null,this.loaded&&this.taxonomyLoaded?null:i("section",{class:"section"},i("ion-spinner",{name:"lines"})),this.item&&this.loaded&&this.taxonomyLoaded?i("page-listing-body",{item:this.item}):null,i("app-footer",null),this.item&&this.loaded&&this.taxonomyLoaded?i("div",{class:"mobile-booking"},i("div",{class:"rate-date-details"},i("span",{class:"highlight"},h(this.item.rate))," per month",i("br",null),i("span",{class:"highlight"},l(this.item.available_date,"m.d.y"))," next available date"),i("div",null,i("button",{"aria-label":"Booking Details",class:"button-dark booking-details",onClick:()=>this.showMobileBookingDetails()},"Booking Details"))):null))]}static get style(){return".page-listing .mobile-booking{display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;-ms-flex-align:center;align-items:center;position:-webkit-sticky;position:sticky;bottom:0;width:100%;background-color:#fff;padding:10px;font-size:12px;font-weight:700;white-space:nowrap;line-height:1.8;z-index:2;-webkit-box-shadow:inset 0 3px 3px -3px rgba(0,0,0,.2);box-shadow:inset 0 3px 3px -3px rgba(0,0,0,.2)}.page-listing .mobile-booking .rate-date-details{margin-right:1rem}.page-listing .mobile-booking .booking-details{padding-top:18px;padding-bottom:18px}.page-listing .mobile-booking .highlight{font-size:20px}\@media (min-width:1200px){.page-listing .mobile-booking{display:none}}"}};export{d as page_listing};